<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-nodejs/analysis-apm">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">스택 | WhaTap</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/nodejs/analysis-apm"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="keywords" content="WhaTap, 와탭, 매뉴얼, 사용법, WhaTap 사용법, WhaTap 매뉴얼, 기술 문서, APM, 애플리케이션 모니터링, 로그 모니터링, 쿠버네티스 모니터링, 서버 모니터링, 데이터베이스 모니터링, URL 모니터링, 클라우드 모니터링, Application Monitoring, Log Monitoring, Kubernetes Monitoring, Server Monitoring, Database Monitoring, URL Monitoring, Cloud Monitoring, Manual, User Guide, Docs, WhaTap Manual, WhaTap Docs, WhaTap Documents"><meta data-rh="true" name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="스택 | WhaTap"><meta data-rh="true" name="description" content="애플리케이션 분석을 안내합니다."><meta data-rh="true" property="og:description" content="애플리케이션 분석을 안내합니다."><link data-rh="true" rel="icon" href="/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/nodejs/analysis-apm"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/nodejs/analysis-apm" hreflang="ko"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/nodejs/analysis-apm" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E46TQ5VSCT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E46TQ5VSCT",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WJSZDJR",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<script src="https://app.happyreact.com/widget/reactions.js" async></script><link rel="stylesheet" href="/assets/css/styles.a4db6977.css">
<link rel="preload" href="/assets/js/runtime~main.a05fd89e.js" as="script">
<link rel="preload" href="/assets/js/main.5d73c2b2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script>



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJSZDJR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedImage_ToTc themedImage--light_HNdA" height="28" width="152"><img src="/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedImage_ToTc themedImage--dark_i4oU" height="28" width="152"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/getting-started/whatap-overview">시작하기</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">상품별 문서 바로가기</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/java/introduction">Java</a></li><li><a class="dropdown__link" href="/php/introduction">PHP</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/python/introduction">Python</a></li><li><a class="dropdown__link" href="/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/golang/introduction">Golang</a></li><li><a class="dropdown__link" href="/server/introduction">Server</a></li><li><a class="dropdown__link" href="/kubernetes/introduction">Kubernetes</a></li><li><a class="dropdown__link" href="/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/mssql/monitoring-intro">MS SQL Server</a></li><li><a class="dropdown__link" href="/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/url/url-intro">URL</a></li><li><a class="dropdown__link narrow" href="/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link" href="/log/introduction">Log</a></li><li><a class="dropdown__link" href="/extensions">Extensions</a></li></ul></div><a class="navbar__item navbar__link hidden" href="/java/introduction">Java 모니터링</a><a class="navbar__item navbar__link hidden" href="/php/introduction">PHP 모니터링</a><a aria-current="page" class="navbar__item navbar__link hidden navbar__link--active" href="/nodejs/introduction">Node.js 모니터링</a><a class="navbar__item navbar__link hidden" href="/python/introduction">Python 모니터링</a><a class="navbar__item navbar__link hidden" href="/dotnet/introduction">.NET 모니터링</a><a class="navbar__item navbar__link hidden" href="/golang/introduction">Golang 모니터링</a><a class="navbar__item navbar__link hidden" href="/server/introduction">Server 모니터링</a><a class="navbar__item navbar__link hidden" href="/kubernetes/introduction">Kubernetes 모니터링</a><a class="navbar__item navbar__link hidden" href="/postgresql/monitoring-intro">PostgreSQL 모니터링</a><a class="navbar__item navbar__link hidden" href="/oracle/monitoring-intro">Oracle 모니터링</a><a class="navbar__item navbar__link hidden" href="/mysql/monitoring-intro">MySQL 모니터링</a><a class="navbar__item navbar__link hidden" href="/mysql-rds/monitoring-intro">MySQL RDS 모니터링</a><a class="navbar__item navbar__link hidden" href="/mssql/monitoring-intro">MS SQL Server 모니터링</a><a class="navbar__item navbar__link hidden" href="/tibero/monitoring-intro">Tibero 모니터링</a><a class="navbar__item navbar__link hidden" href="/cubrid/monitoring-intro">CUBRID 모니터링</a><a class="navbar__item navbar__link hidden" href="/altibase/monitoring-intro">Altibase 모니터링</a><a class="navbar__item navbar__link hidden" href="/redis/monitoring-intro">Redis 모니터링</a><a class="navbar__item navbar__link hidden" href="/mongodb/monitoring-intro">MongoDB 모니터링</a><a class="navbar__item navbar__link hidden" href="/url/url-intro">URL 모니터링</a><a class="navbar__item navbar__link hidden" href="/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/log/introduction">Log 모니터링</a><a class="navbar__item navbar__link hidden" href="/rum/introduction">브라우저 모니터링(RUM)</a><a class="navbar__item navbar__link hidden" href="/extensions">확장 도구</a><a class="navbar__item navbar__link" href="/manage">관리 기능</a><a class="navbar__item navbar__link" href="/reference">참조 문서</a><a class="navbar__item navbar__link" href="/release-notes/">릴리스 노트</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" class="lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="검색" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="hold-menu"><ul><li><a href="/" class="home">WhaTap Docs</a></li><li><a href="https://www.whatap.io" target="_blank" class="ext">와탭 홈페이지 바로가기</a></li></ul></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/nodejs/introduction">Node.js 모니터링</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/supported-spec">지원 환경</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/install-agent">에이전트 설치</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/install-check">설치 점검</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/set-agent">설정하기</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;설정하기&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/agent-manage">관리하기</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/nodejs/learn-apm-main-menu">주요 메뉴 알아보기</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;주요 메뉴 알아보기&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/dashboard-intro">대시보드</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;대시보드&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/flex-board">Flex 보드</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;Flex 보드&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/topology">토폴로지</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;토폴로지&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/track-transactions-intro">트랜잭션</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;트랜잭션&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/metrics-intro">메트릭스</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;메트릭스&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/nodejs/analysis-report-intro">분석과 통계</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;분석과 통계&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/cube">큐브</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/nodejs/analysis-apm">스택</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/nodejs/analysis-apm-trs">트랜잭션</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/report-intro">보고서</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;보고서&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/nodejs/apm-set-notice">알림 설정하기</a><button aria-label="접을 수 있는 사이드바 분류 &#x27;알림 설정하기&#x27; 접기(펼치기)" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/log/introduction">Log 모니터링</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/apidoc/openapi-intro">Open API</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/nodejs/introduction"><span itemprop="name">Node.js 모니터링</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/nodejs/learn-apm-main-menu"><span itemprop="name">주요 메뉴 알아보기</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/nodejs/analysis-report-intro"><span itemprop="name">분석과 통계</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">스택</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>스택</h1></header><p>홈 화면 &gt; 프로젝트 선택 &gt; <strong><em>분석</em></strong> &gt; <strong><em>스택</em></strong></p><p>와탭 모니터링 서비스 초기 화면에서 프로젝트를 선택한 다음 <strong><em>프로젝트 메뉴</em></strong> 하위에 <strong><em>분석</em></strong> &gt; <strong><em>스택</em></strong>을 선택하세요. <strong><em>탑 스택</em></strong>과 <strong><em>유니크 스택</em></strong>, <strong><em>액티브 스택</em></strong>을 확인할 수 있습니다. </p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>스택 분석 기능을 사용할 수 있는 애플리케이션은 <strong>Java</strong>와 <strong>Python</strong>입니다. </p></div></div><p>와탭은 10초(기본값) 간격으로 수집한 Thread Stack을 활용하여 메소드 레벨의 성능 지연 구간을 분석합니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/user_guide_application/stack/st1.png" alt="st1" class="img_ev3q"></p><p>예시 스택에서 <strong>탑 라인</strong>은 <code>socketRead0</code> 입니다. </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token class-name namespace">java</span><span class="token class-name namespace punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name namespace">net</span><span class="token class-name namespace punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name">SocketInputStream</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">socketRead0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Native</span><span class="token plain"> </span><span class="token class-name">Method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>탑 라인</strong>은 덤프를 수행할 스레드가 해당 메소드를 수행 중이라는 것을 의미합니다. 순간적으로 잡혔을 가능성도 있지만 확률적으로 해당 모듈 처리 시간의 합의 비율만큼 스택에 나타납니다. 이 <strong>탑 라인</strong> 메소드의 빈도를 계산하여 메소드 레벨의 성능을 판단할 수 있습니다. 와탭은 <strong>탑 라인 빈도 통계</strong>를 <strong><em>탑 스택</em></strong>(Top Stack)이라고 합니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring23.png" alt="tline1" class="img_ev3q"></p><p><strong><em>탑 스택</em></strong> 분석을 통해 도출된 메소드를 어떤 메소드가 호출했는지에 대한 빈도를 분석할 수 있습니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring24.png" alt="tst1" class="img_ev3q"></p><p>탑 스택 계층 분석에서는 원래 액티브 스택을 확인하기 어려웠습니다. 따라서 와탭은 <strong><em>액티브 스택</em></strong>(Active Stack)을 조회할 수 있도록 동일 스택을 모아서 <strong><em>유니크 스택</em></strong>(Unique Stack)이라는 조회 기능을 제공합니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="top-stack"><strong><em>탑 스택</em></strong><a href="#top-stack" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h2><p>Stack Trace 상의 각 Step 기준으로, Step과 Step 간의 호출 비율을 백분율로 분석한 정보를 제공합니다. 최상위 Step의 적체 빈도를 백분율로 산출하여 내림차순으로 정렬한 결과를 제시합니다.</p><p>각 Step을 클릭하면 해당 Step을 호출하는 상위 Step을 호출 빈도 기준 백분율로 산출하여 제공합니다.</p><p><strong><em>탑 스택</em></strong> 통계는 충분히 많은 데이터를 가지고 판단하는 것이 좋습니다. 수집한 스택의 개수가 10개 미만의 소수인 경우 통계 의미를 갖기에 부족합니다.</p><p><strong><em>탑 스택</em></strong>은 튜닝 시 인지하기 힘들었던 부분의 튜닝 포인트를 찾아내는 데 유용합니다. 가장 빈번하게 나타난 스택은 현재 애플리케이션 서버에서 가장 많은 응답 지연을 발생하는 것으로 판단할 수 있습니다. 가장 왼쪽의 나타나는 비율은 애플리케이션 서버 성능에 영향을 미치는 정도입니다.</p><p>안정적인 애플리케이션 서버일지라도 빈번하게 나타난 스택은 성능 저하를 일으킬 가능성이 있으므로 해당 클래스는 유심히 보는 것이 좋습니다.</p><p><strong><em>탑 스택</em></strong> 클릭 시 해당 최상위 스택에 대한 호출 빈도를 확인할 수 있습니다. <strong><em>탑 스택</em></strong>의 호출 관계는 1 대 1 관계이므로 <strong><em>탑 스택</em></strong>의 depth가 밑으로 내려갈수록 정보의 정확성이 떨어질 수 있습니다. 하위 depth에 대한 정보는 참고 용도로 사용하며 튜닝을 진행하시기 바랍니다.</p><p>애플리케이션 성능 개선을 위해 최상위 Step의 적체 비율이 높은 모듈의 병목 가능성을 검토해야 합니다. 적체 비율이 높은 모듈의 경우 작은 성능 개선도 애플리케이션 전체에 상당한 개선 효과를 가져올 수 있습니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring25.png" alt="tst2" class="img_ev3q"></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token class-name namespace">whatap</span><span class="token class-name namespace punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name namespace">util</span><span class="token class-name namespace punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name">ThreadUtil</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// jdbc.Control.exec의 호출 비율은 87.10%</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name namespace">jdbc</span><span class="token class-name namespace punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name">Control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">exec </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// jdbc.FakePreparedStatement.executeQuery의 호출 비율은 61.18%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>whatap.util.ThreadUtil.sleep</code> ← <code>jdbc.Control.exec</code> ← <code>jdbc.FakePreparedStatement.executeQuery</code>의 호출 비율이 87.10% * 61.18%를 의미하지는 않습니다. <code>jdbc.Control.exec</code>에서 타 모듈의 호출 가능성이 존재하기 때문입니다.</p><p><strong><em>탑 스택</em></strong>을 통해 호출 비율을 판단할 경우, 각 Step 간 호출 비율을 곱하여 전체 호출 관계 비율을 산출해서는 안 됩니다. Top Stack의 호출 비율은 Stack Trace 상에 노출된 정보의 Step 간 호출 비율의 산출 결과이기 때문에, Step 간 호출 비율로 전체 호출 비율을 도출할 경우 왜곡된 결과를 도출하게 됩니다.</p><p><strong><em>탑 스택</em></strong> 통계에서는 일정 기간을 기준으로 시간에 따른 비율 변화와 수집 건수에 대한 히스토리를 제공합니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring27.png" alt="tst3" class="img_ev3q"></p><ul><li><p><strong><em>퍼센트</em></strong>  </p><ul><li>조회 기간 선택된 탑 스택의 비율 변화를 나타냅니다.  </li><li>장애 시점 현황 파악, 개선 전/후 비교에 유용하게 사용됩니다.</li></ul></li><li><p><strong><em>건수</em></strong>  </p><ul><li>수집되는 스택의 수는 액티브 트랜잭션 수에 비례합니다.  </li><li>특정 구간에서 수집량이 증가했다면 서비스 지연이나 급격한 유입량 증가가 있었음을 알 수 있습니다.</li></ul></li></ul><p>다음과 같은 다이어그램으로도 확인 가능합니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring26.png" alt="tst-dg" class="img_ev3q"></p><ul><li><p><strong><em>Stack Chart</em></strong></p><p>개별 탑 스택의 비율을 차트로 나타냅니다.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unique-stack"><strong><em>유니크 스택</em></strong><a href="#unique-stack" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h2><p>Stack Trace 전체의 Hash 값 기준의 산출 결과로 전체 Step이 동일한 호출 비율을 백분율로 분석한 정보를 제공합니다. <strong><em>탑 스택</em></strong>은 Step 간의 호출 비율에 대한 정보를 제공합니다. </p><p><strong><em>유니크 스택</em></strong>은 Stack Trace 전체의 정확한 호출 정보를 기반으로 한 데이터를 제공합니다. 상세 호출 관계를 파악하는 데 유용한 정보를 제공합니다. 예를 들면 적체 비율이 높은 Stack Trace를 식별할 수 있습니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring27_Y8LaYJq.png" alt="ust" class="img_ev3q"></p><p>상세 호출 Step 검토를 통한 호출 경로 상에 이상 모듈의 존재 여부를 파악할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="active-stack"><strong><em>액티브 스택</em></strong><a href="#active-stack" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h2><p>진행 중인 트랜잭션을 액티브 트랜잭션이라고 합니다. <strong>액티브 트랜잭션에서 정기적으로 덤프한 스택</strong>을 <strong><em>액티브 스택</em></strong>이라 합니다.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>와탭 에이전트는 매 10초(옵션 가능)마다 <strong>액티브 트랜잭션</strong>에서 <strong><em>액티브 스택</em></strong>을 덤프하고 이것을 서버에 전송합니다.<br>
<code>active_stack_second=10</code></p></div></div><p><strong><em>액티브 스택</em></strong> 메뉴를 선택하면 수집된 ActiveStack을 차트로 확인할 수 있습니다. 차트는 5분간의 단위 통계 데이터를 <strong><em>Active Transaction</em></strong>의 수를 막대로, <strong><em>TPS</em></strong>를 꺾은 선으로 표시합니다. </p><p>막대를 클릭하면, 클릭한 시간대의 Active Transaction의 정보가 나오며, 그 정보를 클릭하면 해당 Transaction의 Active Stack을 볼 수 있습니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring29.png" alt="ast" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>액티브 트랜잭션에 관한 자세한 내용은 <a href="/nodejs/active-transactions">다음 문서</a>를 참조하세요.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴팩트한-액티브-스택-수집">컴팩트한 액티브 스택 수집<a href="#컴팩트한-액티브-스택-수집" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h3><p>액티브 스택은 스레드 덤프를 정기적으로 수행하기 때문에 잘못 구현되면 에이전트에 오버헤드가 커질 수 있습니다. 와탭은 에이전트 부하를 최소화하면서 액티브 스택을 수집하기 위해 다양한 옵션들을 가지고 있습니다.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_WoCw"><div class="admonitionContent_vXIg"><p><strong><em>사이트맵</em></strong> &gt; <strong><em>스레드 목록/덤프</em></strong> 메뉴에서 스레드 목록 중에 <strong><em>WhaTap-ActiveStackDump</em></strong> 스레드의 <strong><em>CPU Time</em></strong>을 확인하면 오버헤드를 판단할 수 있습니다.</p></div></div><p><strong>액티브 스택 예시</strong></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">JAVA</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">java</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">lang</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">StringBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">StringBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">309</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">util</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">regex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">Matcher</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">appendReplacement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">Matcher</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">839</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">util</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">regex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">Matcher</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replaceAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">Matcher</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">906</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">lang</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replaceAll</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">2162</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">core</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">triggers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">TriggerRegister</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">changeNotify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">TriggerRegister</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">114</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">core</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">aop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">DaoInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">DaoInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">141</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">core</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">aop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">DaoInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">doAround</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">DaoInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">102</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">core</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">aop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reflection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">profiler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">AroundProfiler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invoke</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">AroundProfiler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">19</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">com</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">sun</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">proxy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">$Proxy39</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getUpdateCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">Unknown</span><span class="token plain"> </span><span class="token maybe-class-name">Source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">apache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ibatis</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">resultset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">DefaultResultSetHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getNextResultSet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">DefaultResultSetHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">apache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ibatis</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">resultset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">DefaultResultSetHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">handleResultSets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">DefaultResultSetHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">193</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">apache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ibatis</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">statement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">PreparedStatementHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">query</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">PreparedStatementHandler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">*</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sun</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reflect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">GeneratedMethodAccessor140</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invoke</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">Unknown</span><span class="token plain"> </span><span class="token maybe-class-name">Source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sun</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reflect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">DelegatingMethodAccessorImpl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invoke</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">DelegatingMethodAccessorImpl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">lang</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reflect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">Method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invoke</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">Method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">606</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">support</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">InvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">doInvoke</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">InvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">221</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">support</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">InvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invokeForRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">InvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">136</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">servlet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">mvc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">annotation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">ServletInvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invokeAndHandle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">ServletInvocableHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">114</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">springframework</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">servlet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">mvc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">method</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">annotation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access maybe-class-name">RequestMappingHandlerAdapter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">invokeHandlerMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">RequestMappingHandlerAdapter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">java</span><span class="token operator">:</span><span class="token number">827</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>최적화된 데이터 수집</strong></p><ul><li><p>트랜잭션을 수행 중인 스레드에 대해서만 스택을 덤프합니다.</p></li><li><p>액티브 스택 덤프 시간 간격을 조정할 수 있습니다.
<code>active_stack_second=10</code></p></li><li><p>액티브 스택의 최대 라인에 제한되어 있습니다. Top 라인에서부터 기본 50라인을 수집합니다.
<code>trace_active_callstack_depth=50</code></p></li><li><p>액티브 스택의 각 라인은 해쉬 처리되어 수집됩니다. text는 한 번만 수집됩니다. </p></li><li><p>한 타임에 수집되는 최대 액티브 스택 개수도 제한되어 있습니다.<br>
<code>active_stack_count=100</code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background-thread에-대한-액티브-스택">Background Thread에 대한 액티브 스택<a href="#background-thread에-대한-액티브-스택" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h3><p>기본적으로 액티브 스택은 트랜잭션이 수행되고 있는 스레드의 스택을 말합니다. 하지만 일부 백그라운드 스레드에 대해서도 스택을 분석할 필요가 있을 수 있습니다. 이때 옵션을 통해서 백그라운드 스레드에 대한 액티브 스택을 확보할 수 있습니다. 1.6.2 버전 이후부터 가능합니다.</p><ul><li><p><code>async_stack_enabled</code>의 값을 <code>true</code>로 설정하면 활성화됩니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">async_stack_enabled</span><span class="token operator">=</span><span class="token plain">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>스택 덤프 간격은 포그라운드 액티브 스택 설정에 따라갑니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">active_stack_second</span><span class="token operator">=</span><span class="token number">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>대상 스레드 이름을 지정할 때는 <code>*</code>를 사용하여 문자열 패턴을 지정합니다. </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">async_thread_match</span><span class="token operator">=</span><span class="token plain">http*,abc*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  스레드 이름으로 스택 덤프 대상을 식별합니다. <code>,</code>를 사용하여 match를 여러 개 지정할 수 있습니다.</p></li><li><p>스택의 Top 메소드가 async_thread_parking에 등록된 클래스/메소드일 때 스레드가 파킹 상태에 있다고 판단하고 덤프를 생성하지 않습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">async_thread_parking_class</span><span class="token operator">=</span><span class="token plain">sun.misc.Unsafe</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">async_thread_parking_method</span><span class="token operator">=</span><span class="token plain">park</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="활용-예시">활용 예시<a href="#활용-예시" class="hash-link" aria-label="제목으로 바로 가기" title="제목으로 바로 가기">​</a></h2><p>다음은 <strong><em>스택</em></strong> &gt; <strong><em>탑 스택</em></strong> 메뉴에서 특정 시간대 내역을 조회한 예시입니다. 트레이스나 트랜잭션 통계 정보로는 알 수 없는 다양한 개선 요건을 찾을 수 있습니다.</p><ol><li><p><strong><em>스택</em></strong> &gt; <strong><em>탑 스택</em></strong> 메뉴에서 탑 스택 정보를 조회하세요.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring31.png" alt="tst-view" class="img_ev3q"></p></li><li><p>점유율 순서대로 상위 항목부터 Class/Method 정보를 확인하세요.</p><ul><li><strong>가장 높은</strong> 79.92% 비율을 차지하는 탑 스택<br><code>org.apache.logging.log4j.core.layout.TextEncoderHelper.copyDataToDestination()</code></li><li><strong>두 번째로 높은</strong> 8.01% 비율을 차지하는 탑 스택 <br><code>sun.misc.Unsafe.park()</code> </li></ul></li><li><p>히스토리 기능으로 시간대 별 추이를 확인할 수 있습니다.</p><p><img loading="lazy" src="https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring30.png" alt="history" class="img_ev3q"></p><ul><li>오전 6 시경 <code>TextEncoderHelper.copyDataToDestination()</code> 비율이 감소한 것이 확인됩니다.</li><li>동 시간대 <code>sun.misc.Unsafe.park</code>는 감소된 <code>TextEncoderHelper.copyDataToDestination()</code> 비율만큼 증가했습니다.</li></ul><p>상위 1,2 탑 스택은 모두 Logging과 관련되어 있습니다. 즉, 이 시스템은 전체 업무에서 90% 가까운 수행 시간을 Logging에 소비하고 있는 것을 확인할 수 있습니다.    </p></li><li><p>확인한 점유율을 바탕으로 개선 기대효과를 산정합니다.  </p><p>예시 중 <code>copyDataToDestination()</code> 79.92%, <code>sun.misc.Unsafe.park()</code> 8.01% 비율은 서비스 수행 중 점유된 시간 비율입니다. 즉, <code>copyDataToDestination()</code> 점유율을 반으로 낮춘다면 응답속도 기준으로 44% 가량 성능이 개선될 수 있습니다.</p></li><li><p>탑 스택 정보를 토대로 개선 방안을 검토합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">org.apache.logging.log4j.core.layout.TextEncoderHelper.copyDataToDestination()</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">copyDataToDestination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">final</span><span class="token plain"> </span><span class="token class-name">ByteBuffer</span><span class="token plain"> temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">final</span><span class="token plain"> </span><span class="token class-name">ByteBufferDestination</span><span class="token plain"> destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">synchronized</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token class-name">ByteBuffer</span><span class="token plain"> destinationBuffer </span><span class="token operator">=</span><span class="token plain"> destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getByteBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">destinationBuffer </span><span class="token operator">!=</span><span class="token plain"> temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// still need to write to the destination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">flip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">remaining</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> destinationBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">remaining</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                destinationBuffer </span><span class="token operator">=</span><span class="token plain"> destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">drain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">destinationBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            destinationBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">put</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            temp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">clear</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>TextEncoderHelper</code>는 성능 문제를 비롯한 여러 가지 이유로 Deprecated 된 API입니다.</p></li><li><p><code>sun.misc.Unsafe.park()</code>은 <code>TextEncoderHelper</code> 내부의 synchronized와 관련 있습니다.</p></li></ul></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/node-js">Node.js</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/스택">스택</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/애플리케이션">애플리케이션</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/분석하기">분석하기</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/ui">UI</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="문서 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/nodejs/cube"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">큐브</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/nodejs/analysis-apm-trs"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">트랜잭션</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#top-stack" class="table-of-contents__link toc-highlight"><strong><em>탑 스택</em></strong></a></li><li><a href="#unique-stack" class="table-of-contents__link toc-highlight"><strong><em>유니크 스택</em></strong></a></li><li><a href="#active-stack" class="table-of-contents__link toc-highlight"><strong><em>액티브 스택</em></strong></a><ul><li><a href="#컴팩트한-액티브-스택-수집" class="table-of-contents__link toc-highlight">컴팩트한 액티브 스택 수집</a></li><li><a href="#background-thread에-대한-액티브-스택" class="table-of-contents__link toc-highlight">Background Thread에 대한 액티브 스택</a></li></ul></li><li><a href="#활용-예시" class="table-of-contents__link toc-highlight">활용 예시</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WhaTap Labs Inc. All right reserved. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a05fd89e.js"></script>
<script src="/assets/js/main.5d73c2b2.js"></script>
</body>
</html>
"use strict";(self.webpackChunkwhatap_origin=self.webpackChunkwhatap_origin||[]).push([[56151],{3905:(e,t,p)=>{p.d(t,{Zo:()=>s,kt:()=>d});var a=p(67294);function n(e,t,p){return t in e?Object.defineProperty(e,t,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[t]=p,e}function r(e,t){var p=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),p.push.apply(p,a)}return p}function o(e){for(var t=1;t<arguments.length;t++){var p=null!=arguments[t]?arguments[t]:{};t%2?r(Object(p),!0).forEach((function(t){n(e,t,p[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(p)):r(Object(p)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(p,t))}))}return e}function l(e,t){if(null==e)return{};var p,a,n=function(e,t){if(null==e)return{};var p,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)p=r[a],t.indexOf(p)>=0||(n[p]=e[p]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)p=r[a],t.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(e,p)&&(n[p]=e[p])}return n}var i=a.createContext({}),c=function(e){var t=a.useContext(i),p=t;return e&&(p="function"==typeof e?e(t):o(o({},t),e)),p},s=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var p=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=c(p),d=n,g=m["".concat(i,".").concat(d)]||m[d]||u[d]||r;return p?a.createElement(g,o(o({ref:t},s),{},{components:p})):a.createElement(g,o({ref:t},s))}));function d(e,t){var p=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=p.length,o=new Array(r);o[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var c=2;c<r;c++)o[c]=p[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,p)}m.displayName="MDXCreateElement"},52847:(e,t,p)=>{p.r(t),p.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=p(87462),n=(p(67294),p(3905));const r={id:"gcae",title:"Google Cloud App Engine",description:"Google Cloud App Engine",tags:["Google Cloud App Engine","PHP"]},o=void 0,l={unversionedId:"php/php-os/gcae",id:"php/php-os/gcae",title:"Google Cloud App Engine",description:"Google Cloud App Engine",source:"@site/docs/php/php-os/gcae.mdx",sourceDirName:"php/php-os",slug:"/php/php-os/gcae",permalink:"/php/php-os/gcae",draft:!1,editUrl:"undefined/docs/php/php-os/gcae.mdx",tags:[{label:"Google Cloud App Engine",permalink:"/tags/google-cloud-app-engine"},{label:"PHP",permalink:"/tags/php"}],version:"current",frontMatter:{id:"gcae",title:"Google Cloud App Engine",description:"Google Cloud App Engine",tags:["Google Cloud App Engine","PHP"]},sidebar:"phpSidebar",previous:{title:"Alpine Linux",permalink:"/php/php-os/alpine-linux"},next:{title:"AWS Elastic beanstalk",permalink:"/php/php-os/aws-eb"}},i={},c=[{value:"Custom Docker",id:"custom-docker",level:2},{value:"PHP \ubaa8\ub2c8\ud130\ub9c1 \uc5d0\uc774\uc804\ud2b8 \uc124\uce58",id:"php-\ubaa8\ub2c8\ud130\ub9c1-\uc5d0\uc774\uc804\ud2b8-\uc124\uce58",level:2},{value:"\ubc29\ud654\ubcbd \uaddc\uce59 \ucd94\uac00",id:"\ubc29\ud654\ubcbd-\uaddc\uce59-\ucd94\uac00",level:2},{value:"\ubc30\ud3ec \ubc0f \uc778\uc2a4\ud134\uc2a4 \ud655\uc778",id:"\ubc30\ud3ec-\ubc0f-\uc778\uc2a4\ud134\uc2a4-\ud655\uc778",level:2}],s={toc:c};function u(e){let{components:t,...p}=e;return(0,n.kt)("wrapper",(0,a.Z)({},s,p,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"custom-docker"},"Custom Docker"),(0,n.kt)("p",null,"\uad6c\uae00 \uc571 \uc5d4\uc9c4(Google Cloud App Engine)\uc5d0 PHP \ubaa8\ub2c8\ud130\ub9c1 \uc5d0\uc774\uc804\ud2b8\ub97c \uc124\uce58\ud558\uae30 \uc704\ud574\uc11c\ub294 Custom docker\ub97c \uc774\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4. "),(0,n.kt)("p",null,"\uad6c\uae00 \uc571 \uc5d4\uc9c4 PHP\uc758 ",(0,n.kt)("strong",{parentName:"p"},"\uae30\ubcf8\ud615\uc740 PHP \ud655\uc7a5\ud615 \ubaa8\ub4c8 \ubc0f \uc11c\ube44\uc2a4 \ub370\ubaac\uc744 \uc2e4\ud589\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),". Docker Container\ub97c \ud1b5\ud574 \uc124\uce58\ud558\uc138\uc694. "),(0,n.kt)("p",null,"\uad6c\uae00 \uc571 \uc5d4\uc9c4\uc758 \uc124\uc815 \ud30c\uc77c\uc778 ",(0,n.kt)("em",{parentName:"p"},"app.yaml")," \ud30c\uc77c\uc5d0 ",(0,n.kt)("inlineCode",{parentName:"p"},"flex")," \ud658\uacbd, ",(0,n.kt)("inlineCode",{parentName:"p"},"custom")," \ub7f0\ud0c0\uc784\uc73c\ub85c \uc124\uc815\ud558\uc138\uc694."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=SH",title:"SH"},"$ vi app.yaml\nenv: flex\nruntime: custom\n")),(0,n.kt)("p",null,"Custom Docker\ub85c \uc2e4\ud589\ud558\uae30 \uc704\ud574\uc11c\ub294 ",(0,n.kt)("inlineCode",{parentName:"p"},"flex")," \ud658\uacbd\uacfc ",(0,n.kt)("inlineCode",{parentName:"p"},"custom")," \ub7f0\ud0c0\uc784\uc73c\ub85c \uc124\uc815\ub41c ",(0,n.kt)("em",{parentName:"p"},"app.yaml")," \ud30c\uc77c\uacfc \ub3d9\uc77c\ud55c \uc704\uce58\uc5d0 ",(0,n.kt)("em",{parentName:"p"},"Dockerfile"),"\uc744 \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4. \uad6c\uae00 \uc571 \uc5d4\uc9c4\uc758 \uae30\ubcf8 php Docker \uc774\ubbf8\uc9c0\ub97c \ucc38\uc870\ud558\uc138\uc694."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-docker",metastring:"title=Docker",title:"Docker"},"# google-appengine php php56, php70, php71\nFROM gcr.io/google-appengine/php56\n")),(0,n.kt)("h2",{id:"php-\ubaa8\ub2c8\ud130\ub9c1-\uc5d0\uc774\uc804\ud2b8-\uc124\uce58"},"PHP \ubaa8\ub2c8\ud130\ub9c1 \uc5d0\uc774\uc804\ud2b8 \uc124\uce58"),(0,n.kt)("p",null,"PHP \ubaa8\ub2c8\ud130\ub9c1 \uc5d0\uc774\uc804\ud2b8\ub97c \uc124\uce58\ud558\uc138\uc694."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\ub77c\uc774\ube0c\ub7ec\ub9ac(wget)\ub97c \uc124\uce58\ud558\uc138\uc694.",(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-docker"},"RUN apt-get install wget -y\n"))),(0,n.kt)("li",{parentName:"ol"},"php-fpm \uc2e4\ud589 \uba85\ub839\uc5b4 \ub9c1\ud06c\ub97c \uc0dd\uc131\ud558\uc138\uc694.",(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-docker"},"RUN ln -s /opt/php/sbin/php-fpm /usr/bin/php-fpm\n"))),(0,n.kt)("li",{parentName:"ol"},"whatap \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \ubc0f whatap-php \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud558\uc138\uc694.",(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-docker"},"RUN wget http://repo.whatap.io/debian/release.gpg -O -| apt-key add -\nRUN wget http://repo.whatap.io/debian/whatap-repo_1.0_all.deb\nRUN dpkg -i whatap-repo_1.0_all.deb\nRUN apt-get update\nRUN apt-get install whatap-php\n"))),(0,n.kt)("li",{parentName:"ol"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \ubc0f whatap-php \uc11c\ube44\uc2a4\ub97c \uc124\uc815\ud558\uc138\uc694.",(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-docker"},'#RUN (echo "[ \ubc1c\uae09\ub41c \ud504\ub85c\uc81d\ud2b8 \uc561\uc138\uc2a4 \ud0a4 ]"; echo "[ \ubc1c\uae09\ub41c \uc11c\ubc84 IP ]")|/usr/whatap/php/install.sh\nRUN (echo "xxxxxxxx"; echo "1.1.1.1/2.2.2.2")|/usr/whatap/php/install.sh\n')),(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"PHP \ubaa8\ub2c8\ud130\ub9c1 \ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131 \ud6c4 ",(0,n.kt)("strong",{parentName:"p"},"\ud504\ub85c\uc81d\ud2b8 \uc561\uc138\uc2a4 \ud0a4"),"\uc640 \uc11c\ubc84 IP\uac00 \ubc1c\uae09\ub429\ub2c8\ub2e4. ",(0,n.kt)("em",{parentName:"p"},"/")," \uad6c\ubd84\uc790\ub85c \uc5ec\ub7ec \uac1c\uc758 IP \ubc1c\uae09\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"supervisor"),"\ub97c \ud1b5\ud574 whatap-php \uc11c\ube44\uc2a4\ub97c \uc2e4\ud589\ud558\uc138\uc694.",(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-docker"},'RUN echo "[program:whatap-php]" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "command = /etc/init.d/whatap-php start" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "stdout_logfile = /dev/stdout" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "stdout_logfile_maxbytes=0" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "stderr_logfile = /dev/stderr" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "stderr_logfile_maxbytes=0" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "user = root" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "autostart = true" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "autorestart = true" >> /etc/supervisor/conf.d/whatap.conf\nRUN echo "priority = 10" >> /etc/supervisor/conf.d/whatap.conf\n')))),(0,n.kt)("h2",{id:"\ubc29\ud654\ubcbd-\uaddc\uce59-\ucd94\uac00"},"\ubc29\ud654\ubcbd \uaddc\uce59 \ucd94\uac00"),(0,n.kt)("p",null,"\uad6c\uae00 \uc571 \uc5d4\uc9c4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ub124\ud2b8\uc6cc\ud06c\ub97c \ub300\uc0c1\uc73c\ub85c \ubc29\ud654\ubcbd \uaddc\uce59\uc744 \ucd94\uac00\ud558\uc138\uc694. \ubc1c\uae09\ubc1b\uc740 \uc11c\ubc84 IP\uc5d0 \ub300\ud574 6600 \ud3ec\ud2b8\ub97c \ud1b5\ud55c TCP \uc1a1\uc2e0\uc744 \ud5c8\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://img.whatap.io/media/agent_php/install/tinified/gae_firewall.png",alt:"gae_firewall"}),"\n",(0,n.kt)("img",{parentName:"p",src:"https://img.whatap.io/media/agent_php/install/tinified/gae_firewall_detail.png",alt:"gae_firewall_detail"})),(0,n.kt)("h2",{id:"\ubc30\ud3ec-\ubc0f-\uc778\uc2a4\ud134\uc2a4-\ud655\uc778"},"\ubc30\ud3ec \ubc0f \uc778\uc2a4\ud134\uc2a4 \ud655\uc778"),(0,n.kt)("p",null,"Google Cloud SDK\ub97c \ud1b5\ud574\uc11c \uc124\uc815\ub41c ",(0,n.kt)("em",{parentName:"p"},"app.yaml")," \ud30c\uc77c\uacfc ",(0,n.kt)("em",{parentName:"p"},"Dockerfile")," \uc744 \ubc30\ud3ec\ud558\uc138\uc694."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=SH",title:"SH"},"$ gcloud app deploy\n")),(0,n.kt)("p",null,"\uad6c\uae00 \ud074\ub77c\uc6b0\ub4dc \ucf58\uc194\uc5d0\uc11c \uc571 \uc5d4\uc9c4\uc758 \uc0dd\uc131\ub41c \uc778\uc2a4\ud134\uc2a4\ub97c \ud655\uc778\ud558\uc138\uc694."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://img.whatap.io/media/agent_php/install/tinified/gae_instance.png",alt:"gae_instance"})))}u.isMDXComponent=!0}}]);
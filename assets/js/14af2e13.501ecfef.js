"use strict";(self.webpackChunkwhatap_origin=self.webpackChunkwhatap_origin||[]).push([[3320],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>u});var n=a(67294);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,p=function(e,t){if(null==e)return{};var a,n,p={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(p[a]=e[a]);return p}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}var o=n.createContext({}),h=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=h(e.components);return n.createElement(o.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,p=e.mdxType,r=e.originalType,o=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),d=h(a),u=p,P=d["".concat(o,".").concat(u)]||d[u]||s[u]||r;return a?n.createElement(P,l(l({ref:t},m),{},{components:a})):n.createElement(P,l({ref:t},m))}));function u(e,t){var a=arguments,p=t&&t.mdxType;if("string"==typeof e||p){var r=a.length,l=new Array(r);l[0]=d;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:p,l[1]=i;for(var h=2;h<r;h++)l[h]=a[h];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},65688:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>s,frontMatter:()=>r,metadata:()=>i,toc:()=>h});var n=a(87462),p=(a(67294),a(3905));const r={id:"agent-troubleshooting",title:"\uc124\uce58 \ubb38\uc81c \ud574\uacb0",description:"PHP \uc5d0\uc774\uc804\ud2b8 \uc124\uce58 \uc2dc \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \ubb38\uc81c\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",toc_max_heading_level:2,tags:["PHP","PHP \ubaa8\ub2c8\ud130\ub9c1","\uc560\ud50c\ub9ac\ucf00\uc774\uc158","\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1","Troubleshooting","\ubb38\uc81c \ud574\uacb0"]},l=void 0,i={unversionedId:"php/agent-troubleshooting",id:"php/agent-troubleshooting",title:"\uc124\uce58 \ubb38\uc81c \ud574\uacb0",description:"PHP \uc5d0\uc774\uc804\ud2b8 \uc124\uce58 \uc2dc \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \ubb38\uc81c\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",source:"@site/docs/php/agent-troubleshooting.mdx",sourceDirName:"php",slug:"/php/agent-troubleshooting",permalink:"/php/agent-troubleshooting",draft:!1,editUrl:"undefined/docs/php/agent-troubleshooting.mdx",tags:[{label:"PHP",permalink:"/tags/php"},{label:"PHP \ubaa8\ub2c8\ud130\ub9c1",permalink:"/tags/php-\ubaa8\ub2c8\ud130\ub9c1"},{label:"\uc560\ud50c\ub9ac\ucf00\uc774\uc158",permalink:"/tags/\uc560\ud50c\ub9ac\ucf00\uc774\uc158"},{label:"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1",permalink:"/tags/\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1"},{label:"Troubleshooting",permalink:"/tags/troubleshooting"},{label:"\ubb38\uc81c \ud574\uacb0",permalink:"/tags/\ubb38\uc81c-\ud574\uacb0"}],version:"current",frontMatter:{id:"agent-troubleshooting",title:"\uc124\uce58 \ubb38\uc81c \ud574\uacb0",description:"PHP \uc5d0\uc774\uc804\ud2b8 \uc124\uce58 \uc2dc \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \ubb38\uc81c\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",toc_max_heading_level:2,tags:["PHP","PHP \ubaa8\ub2c8\ud130\ub9c1","\uc560\ud50c\ub9ac\ucf00\uc774\uc158","\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1","Troubleshooting","\ubb38\uc81c \ud574\uacb0"]},sidebar:"phpSidebar",previous:{title:"\uc124\uce58 \uc810\uac80 \uc0ac\ud56d",permalink:"/php/install-check"},next:{title:"PHP \uc5d0\uc774\uc804\ud2b8 \uc124\uc815",permalink:"/php/set-agent"}},o={},h=[{value:"PHP \ud655\uc7a5 \ubaa8\ub4c8 \ubc0f whatap-php \uc11c\ube44\uc2a4 \uc218\ub3d9 \uc124\uc815",id:"extension-modul-manual-setting",level:2},{value:"whatap.ini \uc0dd\uc131",id:"whatapini-\uc0dd\uc131",level:3},{value:"PHP \uba85\ub839\uc5b4(CLI) \uacbd\ub85c \ud655\uc778",id:"check-php-cli-path",level:3},{value:"whatap-php \uc11c\ube44\uc2a4 \ud658\uacbd \ubcc0\uc218 \uc124\uc815",id:"whatap-php-\uc11c\ube44\uc2a4-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815",level:3},{value:"PHP API \ubc84\uc804 \ud655\uc778",id:"php-api-\ubc84\uc804-\ud655\uc778",level:3},{value:"PHP ZTS(Zend Thread Safe) \uc9c0\uc6d0 \uc5ec\ubd80 \ud655\uc778",id:"php-ztszend-thread-safe-\uc9c0\uc6d0-\uc5ec\ubd80-\ud655\uc778",level:3},{value:"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c \ud655\uc778 \ubc0f \uc124\uc815",id:"php-\ud655\uc7a5-\ubaa8\ub4c8-\uacbd\ub85c-\ud655\uc778-\ubc0f-\uc124\uc815",level:3},{value:"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c \ud655\uc778",id:"check-php-extension-module",level:4},{value:"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uc124\uc815",id:"php-\ud655\uc7a5-\ubaa8\ub4c8-\uc124\uc815",level:4},{value:"whatap-php \uc11c\ube44\uc2a4 \ud658\uacbd \ubcc0\uc218 \uc124\uc815",id:"whatap-php-\uc11c\ube44\uc2a4-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815-1",level:4},{value:"whatap.ini \uc124\uc815",id:"php-ini-path",level:3},{value:"PHP \ucd94\uac00 ini \uc124\uc815 \uacbd\ub85c \ud655\uc778 \ubd88\uac00",id:"php-\ucd94\uac00-ini-\uc124\uc815-\uacbd\ub85c-\ud655\uc778-\ubd88\uac00",level:2},{value:"whatap-php \uc11c\ube44\uc2a4(Service) \ud658\uacbd \ubcc0\uc218 \uc124\uc815",id:"whatap-php-\uc11c\ube44\uc2a4service-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815",level:3},{value:"\uc11c\ube44\uc2a4 \uc7ac\uc2dc\uc791",id:"\uc11c\ube44\uc2a4-\uc7ac\uc2dc\uc791",level:3},{value:"Error: Not found PHP API",id:"error-not-found-php-api",level:3},{value:"Error: Not found PHP ini directory",id:"error-not-found-php-ini-directory",level:2},{value:"\uc751\ub2f5 \uc2dc\uac04 \ubd84\ud3ec\ub3c4\uc5d0 \ud2b8\ub79c\uc7ad\uc158\uc774 \ud45c\uc2dc\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0",id:"\uc751\ub2f5-\uc2dc\uac04-\ubd84\ud3ec\ub3c4\uc5d0-\ud2b8\ub79c\uc7ad\uc158\uc774-\ud45c\uc2dc\ub418\uc9c0-\uc54a\ub294-\uacbd\uc6b0",level:2},{value:"Segmentation fault, Sig bus error",id:"segmentation-fault-sig-bus-error",level:2},{value:"Core Dump \uc124\uc815",id:"core-dump-\uc124\uc815",level:3},{value:"Apache",id:"apache",level:3},{value:"PHP-FPM",id:"php-fpm",level:3}],m={toc:h};function s(e){let{components:t,...a}=e;return(0,p.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("h2",{id:"extension-modul-manual-setting"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \ubc0f whatap-php \uc11c\ube44\uc2a4 \uc218\ub3d9 \uc124\uc815"),(0,p.kt)("p",null,"PHP \ud655\uc7a5 \ubaa8\ub4c8\uacfc whatap-php \uc11c\ube44\uc2a4 \uc124\uce58 \ubc0f \uc120\ud0dd \uc124\uce58(",(0,p.kt)("em",{parentName:"p"},"install.sh"),")\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c0\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \uc218\ub3d9\uc73c\ub85c \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4. PHP \ucef4\ud30c\uc77c \uc124\uce58 \ub4f1\uc758 \uc774\uc720\ub85c \ud658\uacbd \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc5c6\ub294 \uacbd\uc6b0 \uc0ac\uc6a9\ud558\uc138\uc694."),(0,p.kt)("h3",{id:"whatapini-\uc0dd\uc131"},"whatap.ini \uc0dd\uc131"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ cp /usr/whatap/php/template.ini /usr/whatap/php/whatap.ini\n$ vi /usr/whatap/php/whatap.ini\n\n# \uc0c1\ub2e8\uc5d0 \ub0b4\uc6a9 \ucd94\uac00\n; Enable whatap extension module\nextension=whatap.so\nwhatap.license=            # \ubc1c\uae09\ub41c \ud504\ub85c\uc81d\ud2b8 \uc561\uc138\uc2a4 \ud0a4\nwhatap.server.host=        # \ubc1c\uae09\ub41c \uc11c\ubc84 IP\nwhatap.app_name=           # \uc6f9\uc11c\ubc84 \uad6c\ubd84 APHP, FPHP (apache : APHP, php-fpm : FPHP)\nwhatap.app_process_name=   # apache, php-fpm \uc758 \ud504\ub85c\uc138\uc2a4 \uc774\ub984(httpd,php-fpm)\n")),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:null},"\uc124\uc815"),(0,p.kt)("th",{parentName:"tr",align:null},"\uc124\uba85"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:null},"whatap.license"),(0,p.kt)("td",{parentName:"tr",align:null},(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\ud504\ub85c\uc81d\ud2b8 \uba54\ub274"))," > ",(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\uad00\ub9ac"))," > ",(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\uc5d0\uc774\uc804\ud2b8 \uc124\uce58"))," \ud398\uc774\uc9c0\uc5d0\uc11c \ubc1c\uae09\ub41c \ud504\ub85c\uc81d\ud2b8 \uc561\uc138\uc2a4 \ud0a4\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:null},"whatap.server.host"),(0,p.kt)("td",{parentName:"tr",align:null},(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\ud504\ub85c\uc81d\ud2b8 \uba54\ub274"))," > ",(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\uad00\ub9ac"))," > ",(0,p.kt)("strong",{parentName:"td"},(0,p.kt)("em",{parentName:"strong"},"\uc5d0\uc774\uc804\ud2b8 \uc124\uce58"))," \ud398\uc774\uc9c0\uc5d0\uc11c \ubc1c\uae09\ub41c \uc11c\ubc84 IP\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:null},"whatap.app_name"),(0,p.kt)("td",{parentName:"tr",align:null},"Apache \uc11c\ubc84\ub294 ",(0,p.kt)("inlineCode",{parentName:"td"},"APHP"),", php-fpm \uc740 ",(0,p.kt)("inlineCode",{parentName:"td"},"FPHP"),"\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:null},"whatap.app_process_name"),(0,p.kt)("td",{parentName:"tr",align:null},"Apache \ub610\ub294 php-fpm \uc758 \uc2e4\ud589 \ud504\ub85c\uc138\uc2a4 \uc774\ub984 \uc124\uc815\uc73c\ub85c \uc815\ud655\ud55c \ud504\ub85c\uc138\uc2a4\uba85 \uc785\ub825\ud558\uba74, \ud574\ub2f9 \ud504\ub85c\uc138\uc2a4\uc5d0 \ub300\ud55c \uc0ac\uc6a9 \uba54\ubaa8\ub9ac\ub97c \uc218\uc9d1\ud569\ub2c8\ub2e4. \uc608\uc2dc\ub85c ",(0,p.kt)("inlineCode",{parentName:"td"},"httpd"),", ",(0,p.kt)("inlineCode",{parentName:"td"},"apach2"),", ",(0,p.kt)("inlineCode",{parentName:"td"},"php-fpm"),", ",(0,p.kt)("inlineCode",{parentName:"td"},"php-fpm")," \ub4f1\uc744 \ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")))),(0,p.kt)("h3",{id:"check-php-cli-path"},"PHP \uba85\ub839\uc5b4(CLI) \uacbd\ub85c \ud655\uc778"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ which php\n\n/usr/bin/php\n")),(0,p.kt)("h3",{id:"whatap-php-\uc11c\ube44\uc2a4-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815"},"whatap-php \uc11c\ube44\uc2a4 \ud658\uacbd \ubcc0\uc218 \uc124\uc815"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"$WHATAP_PHP_BIN")," \ud658\uacbd \ubcc0\uc218\uc5d0 PHP CLI \uba85\ub839\uc5b4\uc758 \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_PHP_BIN=    # PHP \uba85\ub839\uc5b4 \uc704\uce58(/usr/bin/php)\n")),(0,p.kt)("h3",{id:"php-api-\ubc84\uc804-\ud655\uc778"},"PHP API \ubc84\uc804 \ud655\uc778"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"$WHATAP_PHP_BIN")," \ud658\uacbd \ubcc0\uc218\uc5d0 PHP CLI \uba85\ub839\uc5b4\uc758 \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo php -i | grep 'PHP API'\n\nPHP API => 20100412\n")),(0,p.kt)("h3",{id:"php-ztszend-thread-safe-\uc9c0\uc6d0-\uc5ec\ubd80-\ud655\uc778"},"PHP ZTS(Zend Thread Safe) \uc9c0\uc6d0 \uc5ec\ubd80 \ud655\uc778"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=apache",title:"apache"},"$ sudo apachectl -V | grep MPM\n\nServer MPM: Prefork      # ZTS \uc9c0\uc6d0 \uc548\ud568\nServer MPM: Worker       # ZTS \uc9c0\uc6d0\n")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=PHP-FPM",title:"PHP-FPM"},"$ sudo php-fpm -i | grep Thread\n\nThread Safety => disabled       # ZTS \uc9c0\uc6d0 \uc548\ud568\nThread Safety => enabled        # ZTS \uc9c0\uc6d0\n")),(0,p.kt)("h3",{id:"php-\ud655\uc7a5-\ubaa8\ub4c8-\uacbd\ub85c-\ud655\uc778-\ubc0f-\uc124\uc815"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c \ud655\uc778 \ubc0f \uc124\uc815"),(0,p.kt)("h4",{id:"check-php-extension-module"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c \ud655\uc778"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo php -i | grep extension_dir\n\nextension_dir => /usr/lib64/php/modules => /usr/lib64/php/modules\n")),(0,p.kt)("h4",{id:"php-\ud655\uc7a5-\ubaa8\ub4c8-\uc124\uc815"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uc124\uc815"),(0,p.kt)("p",null,"PHP API \ubc84\uc804, PHP ZTS \uc9c0\uc6d0 \uc5ec\ubd80\ub97c \ud655\uc778\ud558\uc5ec \ud658\uacbd\uc5d0 \uc801\ud569\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc120\ud0dd\ud558\uc138\uc694. PHP \ud655\uc7a5 \ubaa8\ub4c8(PHP Extension module) \uacbd\ub85c\uc5d0 ",(0,p.kt)("em",{parentName:"p"},"whatap.so")," \ud30c\uc77c\uba85\uc744 \ubcf5\uc0ac\ud558\uc138\uc694."),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"PHP ZTS\ub97c \uc9c0\uc6d0\ud560 \uacbd\uc6b0 - ",(0,p.kt)("em",{parentName:"li"},"whatap","_","zts","_","[PHP API \ubc84\uc804]",".so")),(0,p.kt)("li",{parentName:"ul"},"PHP ZTS\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 - ",(0,p.kt)("em",{parentName:"li"},"whatap_","[PHP API \ubc84\uc804]",".so"),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title='PHP ZTS \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \uc608\uc2dc'",title:"'PHP",ZTS:!0,"\uc9c0\uc6d0\ud558\uc9c0":!0,"\uc54a\uc744":!0,"\uacbd\uc6b0":!0,"\uc608\uc2dc'":!0},"$ sudo cp /usr/whatap/php/modules/x64/whatap_20100412.so /usr/lib64/php/modules/whatap.so\n")))),(0,p.kt)("h4",{id:"whatap-php-\uc11c\ube44\uc2a4-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815-1"},"whatap-php \uc11c\ube44\uc2a4 \ud658\uacbd \ubcc0\uc218 \uc124\uc815"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_PHP_EXT_HOME=   # PHP Extension \uacbd\ub85c(/usr/lib64/php/modules)\nexport WHATAP_PHP_EXT_SRC=    # \uc640\ud0ed \ub77c\uc774\ube0c\ub7ec\ub9ac \uacbd\ub85c \ubc0f \ud30c\uc77c\uba85\n                              # (/usr/whatap/php/modules/x64/whatap_20100412.so)]\n")),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("inlineCode",{parentName:"li"},"$WHATAP_PHP_EXT_HOME")," \ud658\uacbd\ubcc0\uc218\uc5d0 PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694."),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("inlineCode",{parentName:"li"},"$WHATAP_PHP_EXT_SRC")," \ud658\uacbd\ubcc0\uc218\uc5d0 \uc640\ud0ed \ub77c\uc774\ube0c\ub7ec\ub9ac \uc804\uccb4 \ud30c\uc77c \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694.")),(0,p.kt)("h3",{id:"php-ini-path"},"whatap.ini \uc124\uc815"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"PHP \ucd94\uac00 ini \uc124\uc815 \uacbd\ub85c\ub97c \ud655\uc778\ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => /etc/php.d\n"))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("em",{parentName:"p"},"whatap.ini"),"\ub97c \ud574\ub2f9 \uacbd\ub85c\uc5d0 \ubcf5\uc0ac\ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo cp /usr/whatap/php/whatap.ini /etc/php.d/whtap/ini\n")))),(0,p.kt)("h2",{id:"php-\ucd94\uac00-ini-\uc124\uc815-\uacbd\ub85c-\ud655\uc778-\ubd88\uac00"},"PHP \ucd94\uac00 ini \uc124\uc815 \uacbd\ub85c \ud655\uc778 \ubd88\uac00"),(0,p.kt)("p",null,"PHP \ucef4\ud30c\uc77c(Compile) \uc124\uce58 \uc635\uc158 ",(0,p.kt)("inlineCode",{parentName:"p"},"--with-config-file-scan-dir=PATH"),"\uc774 \uc124\uc815 \uc548\ub41c \uacbd\uc6b0\uc5d0 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => (none)\n")),(0,p.kt)("p",null,(0,p.kt)("em",{parentName:"p"},"whatap.ini")," \ud30c\uc77c \ub0b4\uc6a9\uc744 ",(0,p.kt)("em",{parentName:"p"},"php.ini")," \ub9c8\uc9c0\ub9c9\uc5d0 \ucd94\uac00\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ php -i | grep 'php.ini'\n\nLoaded Configuration File => /etc/php.ini\n\n$ sudo vi php.ini\n\n# \ud30c\uc77c \ub9c8\uc9c0\ub9c9\uc5d0 \ucd94\uac00\n[whatap]\n;Enable whatap extension module\nextension=whatap.so\nwhatap.ext.error_enabled=true\nwhatap.ext.exception_enabled=true\nwhatap.trace_user_enabled=true\nwhatap.trace_user_using_ip=false\n")),(0,p.kt)("p",null,"\uc774\uc678 \uc635\uc158\uc740 ",(0,p.kt)("em",{parentName:"p"},"/usr/whatap/php/whatap.ini")," \ub97c \uc0ac\uc6a9\ud558\uc138\uc694."),(0,p.kt)("h3",{id:"whatap-php-\uc11c\ube44\uc2a4service-\ud658\uacbd-\ubcc0\uc218-\uc124\uc815"},"whatap-php \uc11c\ube44\uc2a4(Service) \ud658\uacbd \ubcc0\uc218 \uc124\uc815"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"$WHATAP_CONFIG_HOME")," \ud658\uacbd\ubcc0\uc218\uc5d0 ",(0,p.kt)("em",{parentName:"p"},"whatap.ini")," \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694."),(0,p.kt)("p",null,"PHP \ucd94\uac00 ini \uacbd\ub85c\ub97c \ud655\uc778 \ud560 \uc218 \uc5c6\ub294 \uacbd\uc6b0 ",(0,p.kt)("em",{parentName:"p"},"whatap.ini"),"\ub97c \uc0dd\uc131\ud55c ",(0,p.kt)("em",{parentName:"p"},"/usr/whatap/php")," \uacbd\ub85c\ub97c \uc124\uc815\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_CONFIG_HOME=      # whatap.ini \uacbd\ub85c(/etc/php.d)\n")),(0,p.kt)("h3",{id:"\uc11c\ube44\uc2a4-\uc7ac\uc2dc\uc791"},"\uc11c\ube44\uc2a4 \uc7ac\uc2dc\uc791"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"Apache \ubc0f PHP-FPM \uc11c\ube44\uc2a4\ub97c \uc7ac\uc2dc\uc791\ud558\uc138\uc694. "),(0,p.kt)("li",{parentName:"ul"},"whatap-php \uc11c\ube44\uc2a4\ub97c \uc7ac\uc2dc\uc791\ud558\uc138\uc694.")),(0,p.kt)("h3",{id:"error-not-found-php-api"},"Error: Not found PHP API"),(0,p.kt)("p",null,"PHP \uba85\ub839\uc5b4(CLI)\ub97c \ucc3e\uc9c0 \ubabb\ud558\ub294 \uacbd\uc6b0 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. "),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"#check-php-cli-path"},"PHP \uba85\ub839\uc5b4(CLI)\uc758 \uc704\uce58"),"\ub97c \uc815\ud655\ud788 \ud655\uc778\ud558\uace0 ",(0,p.kt)("a",{parentName:"p",href:"#extension-modul-manual-setting"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \ubc0f whatap-php \uc11c\ube44\uc2a4 \uc120\ud0dd \uc124\uce58")," \ud56d\ubaa9\uc744 \uc9c4\ud589\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title='PHP API \ubc84\uc804 \uc815\ubcf4 \ud655\uc778'",title:"'PHP",API:!0,"\ubc84\uc804":!0,"\uc815\ubcf4":!0,"\ud655\uc778'":!0},"$ sudo php -i | grep 'PHP API'\n\nPHP API => 20100412\n")),(0,p.kt)("h2",{id:"error-not-found-php-ini-directory"},"Error: Not found PHP ini directory"),(0,p.kt)("p",null,"PHP \ud658\uacbd \uc911 ",(0,p.kt)("inlineCode",{parentName:"p"},"Scan this dir for additional .ini files")," \ud56d\ubaa9\uc758 \uac12\uc744 \ud655\uc778\ud558\uc9c0 \ubabb \ud55c \uacbd\uc6b0 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. PHP \ucef4\ud30c\uc77c \uc124\uce58 \uc635\uc158 ",(0,p.kt)("inlineCode",{parentName:"p"},"--with-config-file-scan-dir=PATH"),"\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0 \ud574\ub2f9 \ud658\uacbd\uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. "),(0,p.kt)("p",null,"\ub2e4\uc74c \uc124\uba85\uc11c\ub97c \ucc38\uc870\ud558\uc5ec ",(0,p.kt)("a",{parentName:"p",href:"#check-php-cli-path"},"PHP \uba85\ub839\uc5b4(CLI)\uc758 \uc704\uce58"),"\ub97c \uc815\ud655\ud788 \ud655\uc778\ud558\uace0 ",(0,p.kt)("a",{parentName:"p",href:"#extension-modul-manual-setting"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \ubc0f whatap-php \uc11c\ube44\uc2a4 \uc120\ud0dd \uc124\uce58")," \ud56d\ubaa9\uc744 \uc9c4\ud589\ud558\uc138\uc694."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => (none)\n")),(0,p.kt)("h2",{id:"\uc751\ub2f5-\uc2dc\uac04-\ubd84\ud3ec\ub3c4\uc5d0-\ud2b8\ub79c\uc7ad\uc158\uc774-\ud45c\uc2dc\ub418\uc9c0-\uc54a\ub294-\uacbd\uc6b0"},"\uc751\ub2f5 \uc2dc\uac04 \ubd84\ud3ec\ub3c4\uc5d0 \ud2b8\ub79c\uc7ad\uc158\uc774 \ud45c\uc2dc\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0"),(0,p.kt)("p",null,"CPU\uc640 Memory \uadf8\ub798\ud504\ub97c \ubcfc \uc218 \uc788\uc9c0\ub9cc \uc751\ub2f5 \uc2dc\uac04 \ubd84\ud3ec\ub3c4 \uc989 \ud788\ud2b8\ub9f5\uc744 \ubcfc \uc218 \uc5c6\ub294 \ud604\uc0c1\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uacbd\uc6b0\uc5d0 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. "),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"\uc5d0\uc774\uc804\ud2b8\uac00 \uc218\uc9d1 \uc11c\ubc84\uc640 \uc815\uc0c1\uc801\uc73c\ub85c \uc5f0\uacb0\ub418\uc5c8\uc73c\ub098 \ud2b8\ub808\uc774\uc11c\uac00 \uc815\uc0c1\uc801\uc73c\ub85c PHP \ud655\uc7a5 \ubaa8\ub4c8\uc5d0 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0"),(0,p.kt)("li",{parentName:"ul"},"\uc124\uc815 \ud6c4 Apache \ubc0f PHP-FPM \uc11c\ube44\uc2a4\ub97c \uc7ac\uc2dc\uc791\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0")),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"PHP \ud655\uc7a5 \ubaa8\ub4c8\uc774 \uc801\uc6a9\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title='PHP \ud655\uc7a5 \ubaa8\ub4c8 \ud655\uc778'",title:"'PHP","\ud655\uc7a5":!0,"\ubaa8\ub4c8":!0,"\ud655\uc778'":!0},"$ sudo php -m\n\n[PHP Modules]\nbz2\ncalendar\nCore\nctype\ncurl\ndate\n\u2026\nwhatap               # \uc640\ud0ed \ubaa8\ub4c8 \ub85c\ub4dc \ud655\uc778\n\u2026\n[Zend Modules]\n"))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"Apache \ubc0f PHP-FPM \uc11c\ube44\uc2a4\ub97c \uc7ac\uc2dc\uc791\ud558\uc138\uc694.")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"PHP \ud655\uc7a5 \ubaa8\ub4c8\uc774 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc740 \uacbd\uc6b0\ub294 \uc815\uc0c1 \uc124\uce58\ub418\uc9c0 \uc54a\uc740 \uac83\uc785\ub2c8\ub2e4. ",(0,p.kt)("em",{parentName:"p"},"whatap.so")," \ub610\ub294 ",(0,p.kt)("em",{parentName:"p"},"whatap.ini")," \ud30c\uc77c \uacbd\ub85c\uac00 PHP \ud658\uacbd\uacfc \uc77c\uce58\ud558\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694.",(0,p.kt)("br",null),"\n\ub2e4\uc74c \uc124\uba85\uc11c\ub97c \ucc38\uc870\ud558\uc5ec ",(0,p.kt)("a",{parentName:"p",href:"#check-php-cli-path"},"PHP \uba85\ub839\uc5b4(CLI) \uacbd\ub85c"),", ",(0,p.kt)("a",{parentName:"p",href:"#check-php-extension-module"},"PHP \ud655\uc7a5 \ubaa8\ub4c8 \uacbd\ub85c"),", ",(0,p.kt)("a",{parentName:"p",href:"#php-ini-path"},"PHP \ucd94\uac00 ini \uc124\uc815 \uacbd\ub85c")," \ud56d\ubaa9\ub4e4\uc744 \ud655\uc778\ud558\uc138\uc694."))),(0,p.kt)("h2",{id:"segmentation-fault-sig-bus-error"},"Segmentation fault, Sig bus error"),(0,p.kt)("p",null,"PHP \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc801\uc6a9\ud55c \ud6c4 \uc11c\ube44\uc2a4\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud560 \uacbd\uc6b0 Apache \ub610\ub294 PHP-FPM\uc758 error log\ub97c \ud655\uc778\ud558\uc138\uc694."),(0,p.kt)("p",null,"error log \ub0b4\uc6a9 \uc911 ",(0,p.kt)("inlineCode",{parentName:"p"},"segmentation fault"),", ",(0,p.kt)("inlineCode",{parentName:"p"},"sig bus")," \ub4f1\uc758 \uc624\ub958 \ubb38\uad6c\uac00 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694. ",(0,p.kt)("inlineCode",{parentName:"p"},"kill child process"),", ",(0,p.kt)("inlineCode",{parentName:"p"},"exit child"),", ",(0,p.kt)("inlineCode",{parentName:"p"},"exit process")," \ub4f1\uc758 \ubb38\uad6c\uc640 \uac19\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. "),(0,p.kt)("p",null,"\ud574\ub2f9 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\ub294 PHP Extension \ubaa8\ub4c8\uc778 ",(0,p.kt)("em",{parentName:"p"},"whatap.so")," \ubaa8\ub4c8\uc5d0\uc11c \ucda9\ub3cc\uc774 \ubc1c\uc0dd\ud558\ub294 \uac83\uc73c\ub85c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4. PHP Extension \ubaa8\ub4c8\uc778 ",(0,p.kt)("em",{parentName:"p"},"whatap.so")," \ub97c \uc911\uc9c0\ud55c \ud6c4\uc5d0 Apache \ub610\ub294 PHP-FPM\uc744 \uc7ac\uc2dc\uc791\ud558\uc138\uc694."),(0,p.kt)("p",null,"\uc11c\ube44\uc2a4\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\ub294 \ud658\uacbd\uc5d0\uc11c Apache \ubc0f PHP-FPM\uc5d0 ",(0,p.kt)("inlineCode",{parentName:"p"},"Core dump")," \uc124\uc815\uc744 \ucd94\uac00\ud55c \ud6c4 ",(0,p.kt)("em",{parentName:"p"},"whatap.so"),"\ub97c \ub2e4\uc2dc \ub85c\ub529\ud558\uc138\uc694. \uc774\ud6c4 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uba74 ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4. ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc744 gdb\ub85c \ubd84\uc11d\ud558\uc5ec \uc6d0\uc778\uc744 \ud574\uacb0\ud558\uc138\uc694. "),(0,p.kt)("h3",{id:"core-dump-\uc124\uc815"},"Core Dump \uc124\uc815"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc744 \uc0dd\uc131\ud560 \ub514\ub809\ud130\ub9ac\uc758 \uad8c\ud55c\uc744 \ubd80\uc5ec\ud558\uc138\uc694"),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"chmod 0777 /home/httpd-core\n"))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"\uc2dc\uc2a4\ud15c \uc124\uc815\uc744 \ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"ulimit -c unlimited\nsysctl fs.suid_dumpable=2\nsysctl kernel.core_uses_pid=0\nsysctl kernel.core_pattern='| /home/httpd-core/core-%e.%p'\n")))),(0,p.kt)("h3",{id:"apache"},"Apache"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"Apache conf \uc5d0 CoreDumpDirectory \ud56d\ubaa9\uc744 \uc124\uc815\ud558\uc138\uc694. "),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"vi /etc/httpd/conf/httpd.conf\n\nCoreDumpDirectory /home/httpd-core\n"))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"Apache\ub97c \uc7ac\uc2dc\uc791\ud558\uba74 \uc124\uc815\uc774 \uc644\ub8cc\ub429\ub2c8\ub2e4. ")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"\uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uba74 ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4. ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uba74 gdb\ub97c \ud1b5\ud574 \uc624\ub958 \uc6d0\uc778\uc744 \ud655\uc778\ud569\ub2c8\ub2e4. ",(0,p.kt)("inlineCode",{parentName:"p"},"bt full")," \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \uc804\uccb4 \uc2a4\ud0dd \uc815\ubcf4\ub97c \ud655\uc778\ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"# gdb /usr/sbin/httpd /home/httpd-core/core-httpd.31832\n...\n...\n\n> bt full\n")))),(0,p.kt)("h3",{id:"php-fpm"},"PHP-FPM"),(0,p.kt)("ol",null,(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"FPM \uc124\uc815 \ud30c\uc77c\uc5d0\uc11c ",(0,p.kt)("inlineCode",{parentName:"p"},"rlimit_core")," \ub97c \uc124\uc815\ud558\uc138\uc694. "),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"rlimit_core = unlimited\n"))),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"PHP-FPM\uc744 \uc7ac\uc2dc\uc791\ud558\uba74 \uc124\uc815\uc774 \uc644\ub8cc\ub429\ub2c8\ub2e4. ")),(0,p.kt)("li",{parentName:"ol"},(0,p.kt)("p",{parentName:"li"},"\uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uba74 ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4. ",(0,p.kt)("em",{parentName:"p"},"dump")," \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uba74 gdb\ub97c \ud1b5\ud574 \uc624\ub958 \uc6d0\uc778\uc744 \ud655\uc778\ud558\uc138\uc694. ",(0,p.kt)("inlineCode",{parentName:"p"},"bt full")," \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c \uc804\uccb4 \uc2a4\ud0dd \uc815\ubcf4\ub97c \ud655\uc778\ud558\uc138\uc694."),(0,p.kt)("pre",{parentName:"li"},(0,p.kt)("code",{parentName:"pre",className:"language-java"},"# gdb /usr/sbin/php-fpm /home/httpd-core/core-php-fpm.31832\n...\n...\n\n> bt full\n")))))}s.isMDXComponent=!0}}]);